doctype html
html(lang='en')
  head
    title Hello!
    meta(charset='utf-8')
    meta(http-equiv='X-UA-Compatible', content='IE=edge')
    meta(name='viewport', content='width=device-width, initial-scale=1')
    script(src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous")
    script(src="https://cdnjs.cloudflare.com/ajax/libs/showdown/1.8.6/showdown.min.js")
    script(src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.1/moment.min.js")
    script(src="https://cdn.steemjs.com/lib/latest/steem.min.js")
    script(src='https://aframe.io/releases/0.8.2/aframe.min.js')
    script(src='https://unpkg.com/aframe-look-at-component@0.5.1/dist/aframe-look-at-component.min.js')
    script(src='https://unpkg.com/aframe-text-geometry-component@0.5.0/dist/aframe-text-geometry-component.min.js')
    script(src='https://rawgit.com/feiss/aframe-environment-component/master/dist/aframe-environment-component.min.js')
    script(src='https://unpkg.com/aframe-fps-look-controls-component/dist/aframe-fps-look-controls-component.min.js')
    script(src='https://rawgit.com/Ctrl-Alt-Zen/aframe-mobile-controls/master/components/twoway-motion/twoway-motion.js')
    script(src='https://rawgit.com/fernandojsg/aframe-teleport-controls/master/dist/aframe-teleport-controls.min.js')
    script(src='https://unpkg.com/aframe-state-component@3.4.0/dist/aframe-state-component.min.js')
    script(src='https://cdn.steemjs.com/lib/latest/steem.min.js')
    script(src='https://rawgit.com/ngokevin/kframe/master/components/layout/dist/aframe-layout-component.js')
    script(src='js/nav.js')
    script.
      function popData () {
      setDiscussionsByBlog(`#{username}`);
      getAccountInfo(`#{username}`);
      }
  body(onload='popData()')
    a-scene(antialias='true')
      a-entity(environment='preset: forest')
      a-entity#cameraRig
        a-camera(set-camera='', wasd-controls='', look-controls='')
          a-cursor
      a-entity(position='0 1.6 0', rotation='0 60 0', bind-for='for: portalItem; in: portals', layout='type: circle; radius: 8; plane: xz; angle: 20')
        template
          a-entity.poster-image(show-info='', geometry='primitive:sphere', material='side:double;src:https://ipfs.io/ipfs/{{ portalItem.Hash360 }}', position='0 0 0', rotation='0 -45 0', scale='1 1 1')
            a-entity(look-at='[camera]')
              a-box.voteButton(vote='{{ portalItem.postUrl }}/10000', position='-1.25 0 0', scale='.5 .5 .5', material='side:double;src:https://cdn.glitch.com/5ba0e9a1-e1be-470c-be6c-b6bd1b8e349e%2Fupvote.png?1528448497979;transparent:true;alphaTest:0.82')
            a-entity.hidebutton(url='{{ portalItem.postUrl}}', id='{{portalItem.postId}}', visible='false', look-at='[camera]', position='0 1.2 0')
              a-entity.col-1(position='0 4 0')
                a-entity.r1-title(geometry='primitive:plane;width:6;height:1', material='side:double;color:#16398D;opacity:0.7', position='0 0.5 0')
                  a-entity.title-text(text-geometry='value:iterate;font:https://rawgit.com/mrdoob/three.js/dev/examples/fonts/optimer_bold.typeface.json;size:0.4', position='-2.610104380706663 -0.22664574459161102 0.1', rotation='', scale='1 1 0.01', material='')
                a-entity.r2-author(geometry='primitive:plane;width:6;height:1', material='side:double;color:#25D193;opacity:0.7', position='0 -0.5 0', rotation='0 0 0', url='/@{{ portalItem.author}}')
                  a-entity.author-pic(geometry='primitive:circle;radius:0.45', material='side:double;src:#author need more functions to pull this info', position='-2.34 0 0.1', scale='1 1 1')
                  a-entity.username(text-geometry='value:disregardfiat;font:https://rawgit.com/mrdoob/three.js/dev/examples/fonts/optimer_bold.typeface.json;size:0.34', position='-1.367 -0.155 0.1', rotation='', scale='1 1 0.01', material='')
                  a-entity.rep(text-geometry='value:54;font:https://rawgit.com/mrdoob/three.js/dev/examples/fonts/optimer_bold.typeface.json;size:0.3', position='2.194796349166291 -0.12506570270188472 0.1', rotation='', scale='1 1 0.01', material='')
                a-entity.r3-body(geometry='primitive:plane;width:6;height:2', material='side:double;opacity:0.7', position='0 -2 0')
                  a-entity.body-text(wrap-count='100', text-geometry='value:{{ portalItem.body }};font:https://rawgit.com/mrdoob/three.js/dev/examples/fonts/optimer_bold.typeface.json;size:0.3', position='-2.7 .46 0.1', rotation='', scale='1 1 .01', material='color:black')
                a-entity.r4-voting(geometry='primitive:plane;width:6;height:1', material='side:double;color:#999999;opacity:0.7', position='0 -3.5 0')
                  a-entity.vote(vote='{{ portalItem.postUrl }}/10000', geometry='primitive:plane;width:0.8;height:0.8', material='side:double;src:https://cdn.glitch.com/5ba0e9a1-e1be-470c-be6c-b6bd1b8e349e%2Fupvote.png?1528448497979;transparent:true;alphaTest:0.82', position='0 -.5 0.1')
                  a-entity.value(text-geometry='value:{{ portalItem.votesVal }};font:https://rawgit.com/mrdoob/three.js/dev/examples/fonts/optimer_bold.typeface.json;size:0.3', position='1.385 -0.09268436887713527 0.1', rotation='', scale='1 1 0.01', material='')
      a-entity#user-profile(geometry='primitive:plane;width:10;height:5.5', material='side:double;color:#4C4C4C;opacity:0.7', position='1.25 4.1 -15', scale='.7 .7 .7', rotation='')
        a-entity#user-pic(geometry='primitive:circle', bind='material.src: userImage', material='side:double', position='0 2.5 0.1', scale='2 2 2', do-on-asset-load='#user')
        a-entity#user-rank(geometry='primitive:circle', material='side:double;color:#3F8BF8;opacity:1', position='-3.5 1.33 0.1', scale='')
          a-entity#rank-icon(geometry='primitive:circle', material='side:double;src:#rank;transparent:true;alphaTest:0.3', position='0 0 0.1')
        a-entity#user-rep(geometry='primitive:circle', material='side:double;color:#FFF;opacity:1', position='3.5 1.33 0.1', scale='')
          a-entity#rep-text(bind='text-geometry.value: userRep', text-geometry='font:https://rawgit.com/mrdoob/three.js/dev/examples/fonts/optimer_bold.typeface.json', position='-.723 -.5 0.1', rotation='', scale='2 2 0.01', material='color:black')
        a-entity#name(bind='text-geometry.value: name', text-geometry='font:https://rawgit.com/mrdoob/three.js/dev/examples/fonts/optimer_bold.typeface.json', position='-2.82 -.67 0.1', rotation='', scale='2 2 0.01', material='')
        a-entity#username(bind='text-geometry.value: username', text-geometry='font:https://rawgit.com/mrdoob/three.js/dev/examples/fonts/optimer_bold.typeface.json', position='-4.379 -2 0.1', rotation='', scale='2 2 0.01', material='')
      a-entity#ambient-light(light='type:ambient;intensity:0.5')
      a-entity#spot-light(light='angle:35;intensity:0.2;type:spot')
